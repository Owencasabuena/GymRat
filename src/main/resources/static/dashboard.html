<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GymRat - Workout Timer & Routines</title>
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/global.css">
    <link rel="stylesheet" href="/css/dashboard.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
</head>

<body>
<header class="header">
    <div class="logo">
        <img src="/assets/img/logo.png" alt="GymRat logo">
        <h1 class="logo__text"><span>Gym</span><span>Rat</span></h1>
    </div>

    <nav class="nav" aria-label="Main navigation">
        <div class="nav__user-section">
            <span class="nav__user-info" id="userInfo">Welcome</span>
            <div class="nav__item--dropdown">
                <button class="nav__settings-btn" id="settingsBtn" aria-haspopup="true" aria-expanded="false">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 12.5C11.3807 12.5 12.5 11.3807 12.5 10C12.5 8.61929 11.3807 7.5 10 7.5C8.61929 7.5 7.5 8.61929 7.5 10C7.5 11.3807 8.61929 12.5 10 12.5Z" stroke="currentColor" stroke-width="1.5"/>
                        <path d="M16.25 10C16.25 10.3125 16.2188 10.625 16.1875 10.9062L18.0625 12.3438C18.2188 12.4688 18.2813 12.6875 18.1875 12.875L16.4375 15.875C16.3438 16.0625 16.1563 16.125 15.9688 16.0625L13.75 15.1875C13.3125 15.5 12.8438 15.7813 12.3125 15.9688L12 18.3125C11.9688 18.5 11.8125 18.625 11.625 18.625H8.125C7.9375 18.625 7.78125 18.5 7.75 18.3125L7.4375 15.9688C6.90625 15.7813 6.4375 15.5313 6 15.1875L3.78125 16.0625C3.59375 16.125 3.40625 16.0625 3.3125 15.875L1.5625 12.875C1.46875 12.6875 1.53125 12.4688 1.6875 12.3438L3.5625 10.9062C3.53125 10.625 3.5 10.3125 3.5 10C3.5 9.6875 3.53125 9.375 3.5625 9.09375L1.6875 7.65625C1.53125 7.53125 1.46875 7.3125 1.5625 7.125L3.3125 4.125C3.40625 3.9375 3.59375 3.875 3.78125 3.9375L6 4.8125C6.4375 4.5 6.90625 4.21875 7.4375 4.03125L7.75 1.6875C7.78125 1.5 7.9375 1.375 8.125 1.375H11.625C11.8125 1.375 11.9688 1.5 12 1.6875L12.3125 4.03125C12.8438 4.21875 13.3125 4.46875 13.75 4.8125L15.9688 3.9375C16.1563 3.875 16.3438 3.9375 16.4375 4.125L18.1875 7.125C18.2813 7.3125 18.2188 7.53125 18.0625 7.65625L16.1875 9.09375C16.2188 9.375 16.25 9.6875 16.25 10Z" stroke="currentColor" stroke-width="1.5"/>
                    </svg>
                    <span class="sr-only">Settings</span>
                </button>

                <div class="settings-dropdown" id="settingsDropdown" hidden>
                    <div class="settings-dropdown__header">
                        <div class="settings-dropdown__user-avatar">
                            <span id="userInitials">JD</span>
                        </div>
                        <div class="settings-dropdown__user-details">
                            <div class="settings-dropdown__user-name" id="settingsUserName">John Doe</div>
                            <div class="settings-dropdown__user-email" id="settingsUserEmail">john@example.com</div>
                        </div>
                    </div>

                    <ul class="settings-dropdown__menu">
                        <li>
                            <button class="settings-dropdown__item" id="changePasswordBtn">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12.75 6.75V5.25C12.75 3.17893 11.0711 1.5 9 1.5C6.92893 1.5 5.25 3.17893 5.25 5.25V6.75M4.5 16.5H13.5C14.3284 16.5 15 15.8284 15 15V8.25C15 7.42157 14.3284 6.75 13.5 6.75H4.5C3.67157 6.75 3 7.42157 3 8.25V15C3 15.8284 3.67157 16.5 4.5 16.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Change Password
                            </button>
                        </li>
                        <li>
                            <button class="settings-dropdown__item" id="editProfileBtn">
                                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M9 11.25C11.0711 11.25 12.75 9.57107 12.75 7.5C12.75 5.42893 11.0711 3.75 9 3.75C6.92893 3.75 5.25 5.42893 5.25 7.5C5.25 9.57107 6.92893 11.25 9 11.25Z" stroke="currentColor" stroke-width="1.5"/>
                                    <path d="M14.25 14.25C14.25 12.5931 11.8995 11.25 9 11.25C6.10051 11.25 3.75 12.5931 3.75 14.25" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Edit Profile
                            </button>
                        </li>
                    </ul>

                    <div class="settings-dropdown__footer">
                        <button class="settings-dropdown__item settings-dropdown__item--logout" id="dropdownLogoutBtn">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M11.25 12.75L14.25 9.75M14.25 9.75L11.25 6.75M14.25 9.75H6.75M6.75 3.75H5.25C4.42157 3.75 3.75 4.42157 3.75 5.25V13.5C3.75 14.3284 4.42157 15 5.25 15H6.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            Logout
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Add these modals before the closing </main> tag in dashboard.html -->

    <!-- Change Password Modal -->
    <dialog class="modal" id="changePasswordModal" aria-labelledby="changePasswordTitle">
        <h2 class="modal__title" id="changePasswordTitle">Change Password</h2>
        <form class="modal__form" id="changePasswordForm">
            <div class="form-group">
                <label class="form-group__label" for="currentPassword">Current Password</label>
                <input
                        class="form-group__input"
                        type="password"
                        id="currentPassword"
                        name="currentPassword"
                        required
                        autocomplete="current-password">
                <p class="form-group__error" id="currentPasswordError" role="alert"></p>
            </div>

            <div class="form-group">
                <label class="form-group__label" for="newPassword">New Password</label>
                <input
                        class="form-group__input"
                        type="password"
                        id="newPassword"
                        name="newPassword"
                        required
                        autocomplete="new-password"
                        minlength="6">
                <p class="form-group__error" id="newPasswordError" role="alert"></p>
            </div>

            <div class="form-group">
                <label class="form-group__label" for="confirmPassword">Confirm New Password</label>
                <input
                        class="form-group__input"
                        type="password"
                        id="confirmPassword"
                        name="confirmPassword"
                        required
                        autocomplete="new-password">
                <p class="form-group__error" id="confirmPasswordError" role="alert"></p>
            </div>

            <div class="auth-error" id="changePasswordAuthError" role="alert"></div>

            <div class="modal__actions">
                <button type="button" class="btn btn--cancel" id="cancelChangePasswordBtn">Cancel</button>
                <button type="submit" class="btn btn--primary" id="submitChangePasswordBtn">Change Password</button>
            </div>
        </form>
    </dialog>

    <!-- Edit Profile Modal -->
    <dialog class="modal" id="editProfileModal" aria-labelledby="editProfileTitle">
        <h2 class="modal__title" id="editProfileTitle">Edit Profile</h2>
        <form class="modal__form" id="editProfileForm">
            <div class="form-group">
                <label class="form-group__label" for="editFirstName">First Name</label>
                <input
                        class="form-group__input"
                        type="text"
                        id="editFirstName"
                        name="firstName"
                        required>
                <p class="form-group__error" id="editFirstNameError" role="alert"></p>
            </div>

            <div class="form-group">
                <label class="form-group__label" for="editLastName">Last Name</label>
                <input
                        class="form-group__input"
                        type="text"
                        id="editLastName"
                        name="lastName"
                        required>
                <p class="form-group__error" id="editLastNameError" role="alert"></p>
            </div>

            <div class="form-group">
                <label class="form-group__label" for="editEmail">Email</label>
                <input
                        class="form-group__input"
                        type="email"
                        id="editEmail"
                        name="email"
                        required>
                <p class="form-group__error" id="editEmailError" role="alert"></p>
            </div>

            <div class="auth-error" id="editProfileAuthError" role="alert"></div>

            <div class="modal__actions">
                <button type="button" class="btn btn--cancel" id="cancelEditProfileBtn">Cancel</button>
                <button type="submit" class="btn btn--primary" id="submitEditProfileBtn">Save Changes</button>
            </div>
        </form>
    </dialog>
</header>

<main class="container">
    <!-- Timer Section -->
    <section class="section timer-section">
        <h2 class="section__title">Timer</h2>
        <div class="timer">
            <div class="timer__display" role="timer" aria-live="polite">
                00:00
            </div>

            <div class="timer__presets">
                <button data-seconds="45" class="btn btn--preset">45 secs</button>
                <button data-seconds="60" class="btn btn--preset">1 min</button>
                <button data-seconds="120" class="btn btn--preset">2 mins</button>
                <button class="btn btn--preset btn--custom">Custom</button>
            </div>

            <div class="timer__custom" hidden>
                <form class="custom-form">
                    <label class="custom-form__label">Set Custom Time (MM:SS)</label>
                    <div class="custom-form__inputs">
                        <input
                                class="custom-form__input"
                                type="number"
                                name="minutes"
                                id="customMinutes"
                                placeholder="MM"
                                min="0"
                                max="99"
                                value="0"
                                aria-label="Minutes">
                        <input
                                class="custom-form__input"
                                type="number"
                                name="seconds"
                                id="customSeconds"
                                placeholder="SS"
                                min="0"
                                max="59"
                                value="0"
                                aria-label="Seconds">
                        <button type="submit" class="btn btn--primary btn--custom">Set</button>
                    </div>
                    <p class="custom-form__error" role="alert"></p>
                </form>
            </div>

            <div class="timer__controls">
                <button class="btn btn--control btn--start-pause">Start</button>
                <button class="btn btn--control btn--reset">Reset</button>
            </div>
        </div>
    </section>

    <!-- Routines Section -->
    <section class="section routine-section">
        <h2 class="section__title">Routines</h2>
        <div class="routines">
            <button class="btn btn--primary btn--add-routine">Add New Routine</button>

            <!-- Routine Cards Container -->
            <div class="routines__list" id="routinesList">
                <!-- Routine cards will be dynamically added here -->
            </div>
        </div>
    </section>

    <!-- Routine Modal (Reused for Add/Edit) -->
    <dialog class="modal" id="routineModal" aria-labelledby="routineModalTitle">
        <h2 class="modal__title" id="routineModalTitle">Add New Routine</h2>
        <form class="modal__form routine-form">
            <div class="form-group">
                <label class="form-group__label" for="routineName">Routine Name</label>
                <input
                        class="form-group__input"
                        type="text"
                        id="routineName"
                        name="routineName"
                        required
                        aria-describedby="nameError">
                <p class="form-group__error" id="nameError" role="alert"></p>
            </div>
            <div class="form-group">
                <label class="form-group__label" for="routineDescription">Description</label>
                <textarea
                        class="form-group__input form-group__textarea"
                        id="routineDescription"
                        name="routineDescription"
                        rows="3"
                        aria-describedby="descError"></textarea>
                <p class="form-group__error" id="descError" role="alert"></p>
            </div>
            <div class="modal__actions">
                <button type="button" class="btn btn--cancel">Cancel</button>
                <button type="submit" class="btn btn--primary">Save</button>
            </div>
        </form>
    </dialog>

    <!-- Exercise Modal -->
    <dialog class="modal" id="exerciseModal" aria-labelledby="exerciseModalTitle">
        <h2 class="modal__title" id="exerciseModalTitle">Add Exercise</h2>
        <form class="modal__form exercise-form">
            <div class="form-group">
                <label class="form-group__label" for="exerciseName">Exercise Name</label>
                <input
                        class="form-group__input"
                        type="text"
                        id="exerciseName"
                        name="exerciseName"
                        required
                        placeholder="e.g., Bench Press"
                        aria-describedby="exerciseNameError">
                <p class="form-group__error" id="exerciseNameError" role="alert"></p>
            </div>

            <div class="form-group">
                <label class="form-group__label" for="exerciseSets">Sets</label>
                <input
                        class="form-group__input"
                        type="number"
                        id="exerciseSets"
                        name="exerciseSets"
                        required
                        min="1"
                        max="99"
                        placeholder="e.g., 3"
                        aria-describedby="exerciseSetsError">
                <p class="form-group__error" id="exerciseSetsError" role="alert"></p>
            </div>

            <div class="form-group">
                <label class="form-group__label">Type</label>
                <div class="radio-group">
                    <label class="radio-label">
                        <input
                                type="radio"
                                name="exerciseType"
                                value="reps"
                                checked
                                class="radio-input">
                        <span>Reps</span>
                    </label>
                    <label class="radio-label">
                        <input
                                type="radio"
                                name="exerciseType"
                                value="duration"
                                class="radio-input">
                        <span>Duration</span>
                    </label>
                </div>
            </div>

            <!-- Reps Input (shown by default) -->
            <div class="form-group" id="repsGroup">
                <label class="form-group__label" for="exerciseReps">Reps</label>
                <input
                        class="form-group__input"
                        type="number"
                        id="exerciseReps"
                        name="exerciseReps"
                        min="1"
                        max="999"
                        placeholder="e.g., 10">
                <p class="form-group__error" id="exerciseRepsError" role="alert"></p>
            </div>

            <!-- Duration Input (hidden by default) -->
            <div class="form-group" id="durationGroup" hidden>
                <label class="form-group__label" for="exerciseDuration">Duration (seconds)</label>
                <input
                        class="form-group__input"
                        type="number"
                        id="exerciseDuration"
                        name="exerciseDuration"
                        min="1"
                        max="9999"
                        placeholder="e.g., 60">
                <p class="form-group__error" id="exerciseDurationError" role="alert"></p>
            </div>

            <div class="modal__actions">
                <button type="button" class="btn btn--cancel">Cancel</button>
                <button type="submit" class="btn btn--primary">Save</button>
            </div>
        </form>
    </dialog>

    <!-- Delete Routine Confirmation Dialog -->
    <dialog class="modal modal--confirm" id="deleteRoutineModal" aria-labelledby="deleteRoutineTitle">
        <form class="modal__form delete-form">
            <p class="modal__text" id="deleteRoutineTitle">Are you sure you want to delete this routine?</p>
            <div class="modal__actions">
                <button type="button" class="btn btn--cancel">Cancel</button>
                <button type="submit" class="btn btn--danger">Delete</button>
            </div>
        </form>
    </dialog>

    <!-- Delete Exercise Confirmation Dialog -->
    <dialog class="modal modal--confirm" id="deleteExerciseModal" aria-labelledby="deleteExerciseTitle">
        <form class="modal__form delete-form">
            <p class="modal__text" id="deleteExerciseTitle">Are you sure you want to delete this exercise?</p>
            <div class="modal__actions">
                <button type="button" class="btn btn--cancel">Cancel</button>
                <button type="submit" class="btn btn--danger">Delete</button>
            </div>
        </form>
    </dialog>

</main>

<script type="module" src="/js/dashboard.js"></script>

</body>
</html>